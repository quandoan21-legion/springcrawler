<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${title != null} ? ${title} : 'News App'">News App</title>
    <link rel="stylesheet" th:href="@{/front/news/styles.css}">
</head>
<body>
<nav>
    <div class="main-nav container flex">
        <a href="/" class="company-logo">
            <img th:src="@{/front/news/images/logo.png}" alt="logo">
        </a>
        <div class="nav-links">
            <ul class="flex category-nav">
                <li class="hover-link nav-item"
                    th:classappend="${selectedCategoryId} == null ? ' active' : ''">
                    <a href="/">All</a>
                </li>
                <li class="hover-link nav-item"
                    th:each="category : ${categories}"
                    th:classappend="${selectedCategoryId} == ${category.id} ? ' active' : ''">
                    <a th:href="@{/(categoryId=${category.id}, keyword=${keyword})}"
                       th:text="${category.name}"></a>
                </li>
            </ul>
        </div>
        <form class="search-bar flex" method="get" action="/">
            <input type="text" class="news-input" id="search-text" name="keyword"
                   placeholder="Search by title" th:value="${keyword}">
            <input type="hidden" name="categoryId" th:value="${selectedCategoryId}">
            <button class="search-button" type="submit">Search</button>
        </form>
    </div>
</nav>


<main>
    <div class="cards-container container flex" id="cardscontainer">
        <p th:if="${#lists.isEmpty(posts)}" style="width:100%;text-align:center;">No crawled posts yet.</p>
        <div class="card" th:each="post : ${posts}">
            <div class="card-header">
                <img th:src="${post.imgUrl != null} ? ${post.imgUrl} : @{/front/news/images/NewsWebsite.png}"
                     alt="news" id="news-img">
            </div>
            <div class="card-content">
                <h3 id="news-title" th:text="${post.title}">This is the Title</h3>
                <h6 class="news-source" id="news-source"
                    th:text="${post.category != null ? post.category.name : 'General news'} + ' Â· ' + #temporals.format(post.createdAt, 'dd/MM/yyyy HH:mm')">
                    constGenius 02/02/2024
                </h6>
                <p class="news-desc" id="news-desc"
                   th:text="${post.shortDescription != null ? post.shortDescription : (post.content != null ? #strings.abbreviate(post.content, 180) : 'Updating...')}">
                    Lorem ipsum dolor sit, amet consectetur adipisicing elit.
                </p>
                <div class="cta">
                    <a th:if="${post.sourceUrl != null}" th:href="${post.sourceUrl}" target="_blank">Read original source</a>
                </div>
            </div>
        </div>
    </div>
</main>


</body>
</html>
